<?xml version='1.0' encoding='UTF-8'?>
<simple-page xmlns="http://n2oapp.net/framework/config/schema/page-3.0"
             name="Справочники">

    <table query-id="syncEntry" route="/main">
        <pagination/>

        <filters>
            <row>
                <col size="4">
                    <input-text id="text" no-label-block="true" />
                </col>
            </row>
        </filters>

        <toolbar place="topRight">
            <button id="create" label="Создать" icon="fa fa-plus">
                <open-page page-id="syncEntryCreate" page-name="Добавление справочника" upload="defaults"/>
            </button>

            <button id="edit" label="Изменить" icon="fa fa-pencil" visible="false">
                <show-modal page-id="syncMapping"
                            page-name="Настройка полей справочника"
                            modal-size="xl" scrollable="true"
                            route="/mapping/edit">
                    <query-param name="sourceCode" value="{source.code}"/>
                    <query-param name="code" value="{code}"/>
                    <query-param name="name" value="{name}"/>
                    <query-param name="version" value="{version}"/>
                    <query-param name="versioned" value="{versioned}"/>
                    <query-param name="autoUpdatable" value="{autoUpdatable}"/>
                    <query-param name="actionType" value="update"/>
                </show-modal>
            </button>

            <button id="delete" label="Удалить" icon="fa fa-trash" color="danger" enabled="{removable}">
                <invoke operation-id="delete"/>
            </button>
        </toolbar>

        <columns>
            <column text-field-id="code" label="Код справочника" width="250px" sorting-direction="asc"/>
            <column text-field-id="name" label="Наименование справочника" width="500px"/>

            <column text-field-id="source.caption" label="Источник"/>
            <column text-field-id="version" label="Версия справочника"/>
            <column text-field-id="versioned" label="Поддержка версионности">
                <checkbox/>
            </column>
            <column text-field-id="autoUpdatable" label="Автоматическое обновление">
                <checkbox/>
            </column>

            <column text-field-id="lastDateTime" label="Дата последнего обновления">
                <text format="date DD.MM.YYYY"/>
            </column>
            <column text-field-id="lastStatus" label="Статус последнего обновления"/>
        </columns>
    </table>

</simple-page>